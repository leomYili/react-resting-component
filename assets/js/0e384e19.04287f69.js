"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[671],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return u}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),u=i,h=d["".concat(l,".").concat(u)]||d[u]||m[u]||o;return n?a.createElement(h,r(r({ref:t},c),{},{components:n})):a.createElement(h,r({ref:t},c))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var p=2;p<o;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},59881:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return m}});var a=n(87462),i=n(63366),o=(n(67294),n(3905)),r=["components"],s={sidebar_position:1,title:"Intro"},l=void 0,p={unversionedId:"intro",id:"intro",title:"Intro",description:"This is a component that implements a feature similar to that provided in vue (keep-alive). The expectation is that the component will be stillness (not frozen, just kept live)",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/react-stillness-component/docs/intro",editUrl:"https://github.com/leomYili/react-stillness-component/tree/main/docs/docs/intro.md",tags:[],version:"current",lastUpdatedBy:"leomYili",lastUpdatedAt:1648883428,formattedLastUpdatedAt:"4/2/2022",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Intro"},sidebar:"docs",next:{title:"Get-started",permalink:"/react-stillness-component/docs/get-started"}},c={},m=[{value:"\u2728 Feature",id:"-feature",level:2},{value:"\ud83d\udca1 what?",id:"-what",level:2},{value:"Data state driven",id:"data-state-driven",level:3},{value:"DOM",id:"dom",level:3},{value:"react API",id:"react-api",level:3},{value:"typescript",id:"typescript",level:3},{value:"Compatibility",id:"compatibility",level:3}],d={toc:m};function u(e){var t=e.components,s=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This is a component that implements a feature similar to that provided in ",(0,o.kt)("a",{parentName:"p",href:"https://vuejs.org/"},"vue")," (",(0,o.kt)("a",{parentName:"p",href:"https://vuejs.org/v2/guide/components-dynamic-async.html#keep-alive"},"keep-alive"),"). The expectation is that the component will be ",(0,o.kt)("strong",{parentName:"p"},"stillness")," (not frozen, just kept live)")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"React-stillness-component intro img",src:n(41490).Z,width:"718",height:"641"})),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"In the process of implementation, we learned a lot of good experience from the community, such as ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/facebook/react/issues/12039"},"issue #12039"),", ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/reactwg/react-18/discussions/19"},"react-18 Offscreen"),", ",(0,o.kt)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/214166951"},"\u5728 React \u4e2d\u5b9e\u73b0 keep alive"),", etc., and combined with our actual business scenario, we finally implemented this component using  ",(0,o.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/portals.html"},"React.createPortal API")," API and ",(0,o.kt)("a",{parentName:"p",href:"https://redux.js.org/"},"redux"),"."))),(0,o.kt)("h2",{id:"-feature"},"\u2728 Feature"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Minimal syntax"),", at least one prop is required"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Updated"),", provides ",(0,o.kt)("inlineCode",{parentName:"li"},"Higher-Order Component")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"Hooks")," way to manage components"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Low learning cost"),", no additional lifecycle concepts to affect the combination of components"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Minimal impact"),", does not affect react-related api, including Context, Error Boundaries, etc., and even SyntheticEvent"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Performance first"),", automatic lazy loading to improve overall application performance")),(0,o.kt)("h2",{id:"-what"},"\ud83d\udca1 what?"),(0,o.kt)("p",null,"First, this component is not just to achieve the effect of caching components, but also to solve the problem of cache control"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Portal")," can do ",(0,o.kt)("strong",{parentName:"li"},"rendering components off-screen"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Redux")," can help us to save the real-time cache state")),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The component does not provide additional lifecycle hooks to resolve child components listening for cached state. Instead, the cache state is combined with business state in a similar way to ",(0,o.kt)("a",{parentName:"p",href:"https://react-dnd.github.io/react-dnd/docs/overview#monitors"},"react DnD Monitors"),", with custom ",(0,o.kt)("strong",{parentName:"p"},"children props")," passed down the line, also is a way to enhance the composability of components."))),(0,o.kt)("h3",{id:"data-state-driven"},"Data state driven"),(0,o.kt)("p",null,"For cache control, the component provides a ",(0,o.kt)("a",{parentName:"p",href:"/react-stillness-component/docs/basic-concepts/items-types#Types"},"Types")," to identify a component or even a group of components, to specify and classify a certain type of cache component. Of course, this is not required."),(0,o.kt)("p",null,"In fact, unique ids are also provided inside the component to identify the component, and the two are practically identical. To get the id inside the component, see ",(0,o.kt)("a",{parentName:"p",href:"/react-stillness-component/docs/api/contract-state"},"getStillnessId()")," ."),(0,o.kt)("h3",{id:"dom"},"DOM"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"DOM\u64cd\u4f5c",src:n(80683).Z,width:"1196",height:"456"})),(0,o.kt)("p",null,"This component provides a positioning element for ",(0,o.kt)("inlineCode",{parentName:"p"},"children"),", the ",(0,o.kt)("inlineCode",{parentName:"p"},'[data-key="__stillness-uniqueId**__"]')," node in the image above."),(0,o.kt)("p",null,"and the ",(0,o.kt)("strong",{parentName:"p"},"container")," element required by ",(0,o.kt)("inlineCode",{parentName:"p"},"Portal"),", the ",(0,o.kt)("inlineCode",{parentName:"p"},'[data-key="offscreen-wrapper"]')," node in the above image."),(0,o.kt)("p",null,"Each time a ",(0,o.kt)("strong",{parentName:"p"},"stillness")," element is removed or inserted, it will actually do a dom operation to show and hide the UI effect. Also each time ",(0,o.kt)("strong",{parentName:"p"},"stillness")," is started, if there is a scrollable element in ",(0,o.kt)("inlineCode",{parentName:"p"},"children"),", its scroll position will be saved automatically (default is true)"),(0,o.kt)("h3",{id:"react-api"},"react API"),(0,o.kt)("p",null,"Because of the use of ",(0,o.kt)("inlineCode",{parentName:"p"},"Portal"),", even if the real dom element is removed or moved in, the component can still perform event bubbling and other ",(0,o.kt)("inlineCode",{parentName:"p"},"react")," related api's accordingly and behave like a normal component."),(0,o.kt)("h3",{id:"typescript"},"typescript"),(0,o.kt)("p",null,"The component is currently developed using ",(0,o.kt)("strong",{parentName:"p"},"typescript"),", please refer to ",(0,o.kt)("a",{parentName:"p",href:"/react-stillness-component/docs/get-started#typescript-support"},"Typescript support")," for the relevant type definitions."),(0,o.kt)("h3",{id:"compatibility"},"Compatibility"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"React v16.8+"),(0,o.kt)("li",{parentName:"ul"},"Preact v10+")))}u.isMDXComponent=!0},41490:function(e,t,n){t.Z=n.p+"assets/images/intro-b04756ad68029bcb9869a31329d8dbd8.gif"},80683:function(e,t,n){t.Z=n.p+"assets/images/real-dom-dd8d5532cfb9f457cef777f798c40870.png"}}]);